# Projects

This documents lists the projects that are part of the Marain Claims solution along with a brief summary of each.

| Project                          | Purpose                                                                                                                                                                                                                                                                                                                              |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Marain.Claims.Abstractions       | Base data types and interfaces for the codebase.                                                                                                                                                                                                                                                                                     |
| Marain.Claims.Benchmark          |                                                                                                                                                                                                                                                                                                                                      |
| Marain.Claims.Client             | AutoRest-generated client library for the Claims API                                                                                                                                                                                                                                                                                 |
| Marain.Claims.Client.OpenApi     | Links the Menes integration provided in `Marain.Claims.OpenApi` with the `Marain.Claims.Client` by providing an implementation of `IResourceAccessEvaluator` that is backed by the Marain Claims API via the client library.                                                                                                         |
| Marain.Claims.Deployment         | Scripts and ARM templates for deployment. Integrates with the `Marain.Infrastructure` deployment mechanism.                                                                                                                                                                                                                          |
| Marain.Claims.Host.Functions     | Azure Functions project to host the claims API. Contains only the startup code and Menes entry point. Menes OpenApi services are provided in the `Marain.Claims.OpenApi.Service` project.                                                                                                                                            |
| Marain.Claims.Hosting.AspNetCore | Contains setup code that is common to any ASP.NET Core based hosting for the Claims API. Currently used by `Marain.Claims.Host.Functions`, but would also be relevent if Claims were hosted as a standard ASP.NET Core web app. Also contains the `LocalResourceAccessEvaluator` used for claim evaluation by the Claims API itself. |
| Marain.Claims.OpenApi            | Integration with Menes                                                                                                                                                                                                                                                                                                               |
| Marain.Claims.OpenApi.AspNetCore | Contains Menes integration points with the ASP.NET core pipeline. These plug into the Menes OpenApi context builder to construct the `CurrentPrincipal` from different sources. Implementations are provided for various flavours of JWT-based authentication.                                                                       |
| Marain.Claims.OpenApi.Service    | Contains the Menes OpenApi service implementations for the Claims API                                                                                                                                                                                                                                                                |
| Marain.Claims.OpenApi.Specs      | SpecFlow-based integration tests for the Claims API. These specifications run the `Marain.Claims.Host.Functions` project and execute against the API using the `Marain.Claims.Client` library.                                                                                                                                       |
| Marain.Claims.SetupTool          | Command line utility to assist with setting up a new instance of Claims, such as adding the basic claims needed to allow the Claims API itself to authorize requests.                                                                                                                                                                |
| Marain.Claims.Specs              | SpecFlow-based unit/integration tests that operate directly on their target classes (e.g. storage, access control policies).                                                                                                                                                                                                         |
| Marain.Claims.Storage.AzureBlob  | Azure Blob storage-backed implementations of the `IClaimPermissionsStore` and `IResourceAccessRuleSetStore` interfaces.                                                                                                                                                                                                              |
| Marain.Claims.Tenancy.AzureBlob  | Implementation of `IPermissionsStoreFactory` that uses the `Corvus.Storage` and `Corvus.Tenancy` libraries to supply multi-tenant aware instances of the `IClaimPermissionsStore` and `IResourceAccessRuleSetStore` implementations in `Marain.Claims.Storage.AzureBlob`                                                             |